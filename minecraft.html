<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft | Sigmi Team</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>
    <style>
        .glassmorphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #6e45e2 0%, #88d3ce 100%);
        }
        .hover-scale {
            transition: all 0.3s ease;
        }
        .hover-scale:hover {
            transform: scale(1.02);
        }
        .file-card:hover .download-icon {
            transform: translateY(-3px);
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .minecraft-btn {
            background: linear-gradient(135deg, #3b8526 0%, #60b03e 100%);
            transition: all 0.3s ease;
        }
        .minecraft-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 133, 38, 0.3);
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-content {
            transform: scale(1);
        }
        .client-option {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .client-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .members-sidebar {
            position: fixed;
            top: 0;
            right: 0;
            height: 100%;
            width: 320px;
            background: rgba(30, 30, 46, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 1001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.3);
        }
        .members-sidebar.active {
            transform: translateX(0);
        }
        .members-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .members-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .opacity-0 { 
            opacity: 0; 
            transition: opacity 0.3s ease; 
        }
        .opacity-100 { 
            opacity: 1; 
            transition: opacity 0.3s ease; 
        }
    </style>
</head>
<body class="min-h-screen gradient-bg text-white font-sans">
    <!-- Background Effect -->
    <div id="vanta-bg" class="fixed inset-0 z-0"></div>

    <!-- Members Sidebar -->
    <div id="membersSidebar" class="members-sidebar">
        <div class="p-4 flex justify-between items-center border-b border-purple-800">
            <h2 class="text-lg font-semibold">Current Members</h2>
            <button id="closeMembersSidebar" class="p-1 rounded-full hover:bg-purple-700 transition">
                <i data-feather="x" class="w-5 h-5"></i>
            </button>
        </div>
        <div class="p-4 overflow-y-auto h-[calc(100%-60px)]">
            <div id="membersList" class="space-y-3"></div>
        </div>
    </div>
    <div id="membersOverlay" class="members-overlay"></div>

    <!-- Update Check Modal -->
    <div id="updateModal" class="modal-overlay">
        <div class="modal-content glassmorphism rounded-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-semibold">Check for Updates</h2>
                <button onclick="closeModal()" class="p-1 rounded-full hover:bg-purple-700 transition">
                    <i data-feather="x"></i>
                </button>
            </div>
            <p class="text-gray-300 mb-6">Select which client you'd like to check for updates:</p>
            
            <div class="space-y-4">
                <div class="client-option glassmorphism p-4 rounded-lg flex items-center space-x-4" onclick="redirectToUpdate('oblivion')">
                    <div class="w-12 h-12 rounded-full bg-green-600 flex items-center justify-center">
                        <i data-feather="box" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">Oblivion Client</h3>
                        <p class="text-sm text-gray-300">Recommended</p>
                    </div>
                </div>
                
                <div class="client-option glassmorphism p-4 rounded-lg flex items-center space-x-4" onclick="redirectToUpdate('meteor')">
                    <div class="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center">
                        <i data-feather="cloud" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">Meteor Client</h3>
                        <p class="text-sm text-gray-300">Popular choice</p>
                    </div>
                </div>
                
                <div class="client-option glassmorphism p-4 rounded-lg flex items-center space-x-4" onclick="redirectToUpdate('wurst')">
                    <div class="w-12 h-12 rounded-full bg-yellow-600 flex items-center justify-center">
                        <i data-feather="zap" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">Wurst Client</h3>
                        <p class="text-sm text-gray-300">Classic option</p>
                    </div>
                </div>
            </div>
            
            <button onclick="closeModal()" class="w-full mt-6 py-2 px-4 rounded-lg border border-purple-700 hover:bg-purple-800 hover:bg-opacity-50 transition">
                Cancel
            </button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="relative z-10 min-h-screen flex flex-col">
        <!-- Header -->
        <header class="glassmorphism p-4 shadow-lg">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <a href="https://senturyhanderserson.github.io/SigmiForCCGS/" class="p-2 rounded-full hover:bg-purple-700 transition">
                        <i data-feather="arrow-left"></i>
                    </a>
                    <h1 class="text-2xl font-bold">Minecraft Java Clients</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="settingsButton" class="p-2 rounded-full hover:bg-purple-700 transition">
                        <i data-feather="settings"></i>
                    </button>
                    <button id="membersButton" class="p-2 rounded-full hover:bg-purple-700 transition">
                        <i data-feather="users"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 container mx-auto p-4 md:p-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Left Column -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Description Card -->
                    <div class="glassmorphism rounded-xl p-6 shadow-lg hover-scale" data-aos="fade-right">
                        <h2 class="text-xl font-semibold mb-4">About Minecraft Clients</h2>
                        <p class="text-gray-200">
                            Minecraft clients are modified versions of the Minecraft game that include various enhancements,
                            cheats, and quality-of-life features. These clients can provide advantages like X-ray vision,
                            auto-mining, flight, and more. Use them responsibly on servers or not, we don't really care.
                        </p>
                    </div>

                    <!-- Instructions Card -->
                    <div class="glassmorphism rounded-xl p-6 shadow-lg hover-scale" data-aos="fade-right" data-aos-delay="100">
                        <h2 class="text-xl font-semibold mb-4">Installation Instructions</h2>
                        <ol class="list-decimal list-inside space-y-3 text-gray-200">
                            <li class="pl-2">Visit the official website using the download buttons on the right</li>
                            <li class="pl-2">Download the client from the official source</li>
                            <li class="pl-2">Make sure you have Java installed on your computer</li>
                            <li class="pl-2">Download/Install Curseforge, Forge, Feather or any other client that allows mods</li>
                            <li class="pl-2">Create an instance that matches your desired version and client</li>
                            <li class="pl-2">Locate the mods folder and place the Jar file inside</li>
                            <li class="pl-2">Join a server and enjoy the *ethical* exploits</li>
                        </ol>
                    </div>

                    <!-- Video Tutorial Card -->
                    <div class="glassmorphism rounded-xl p-6 shadow-lg hover-scale" data-aos="fade-right" data-aos-delay="200">
                        <h2 class="text-xl font-semibold mb-4">Video Tutorial</h2>
                        <div class="aspect-w-16 aspect-h-9 bg-black bg-opacity-30 rounded-lg overflow-hidden">
                            <iframe class="w-full h-64 md:h-96" src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="space-y-6">
                    <!-- Files Needed Card -->
                    <div class="glassmorphism rounded-xl p-6 shadow-lg hover-scale" data-aos="fade-left">
                        <h2 class="text-xl font-semibold mb-4">Available Clients</h2>
                        <div class="space-y-3">
                            <div class="file-card glassmorphism p-4 rounded-lg flex justify-between items-center hover:bg-purple-700 transition cursor-pointer" 
                                 onclick="redirectToOfficial('oblivion')">
                                <div>
                                    <h3 class="font-medium">Oblivion Client (recommended)</h3>
                                    <p class="text-sm text-gray-300">JAR • Official Site</p>
                                </div>
                                <div class="download-icon transition">
                                    <i data-feather="external-link"></i>
                                </div>
                            </div>
                            
                            <div class="file-card glassmorphism p-4 rounded-lg flex justify-between items-center hover:bg-purple-700 transition cursor-pointer" 
                                 onclick="redirectToOfficial('meteor')">
                                <div>
                                    <h3 class="font-medium">Meteor Client</h3>
                                    <p class="text-sm text-gray-300">JAR • Official Site</p>
                                </div>
                                <div class="download-icon transition">
                                    <i data-feather="external-link"></i>
                                </div>
                            </div>
                            
                            <div class="file-card glassmorphism p-4 rounded-lg flex justify-between items-center hover:bg-purple-700 transition cursor-pointer" 
                                 onclick="redirectToOfficial('wurst')">
                                <div>
                                    <h3 class="font-medium">Wurst Client</h3>
                                    <p class="text-sm text-gray-300">JAR • Official Site</p>
                                </div>
                                <div class="download-icon transition">
                                    <i data-feather="external-link"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions Card -->
                    <div class="glassmorphism rounded-xl p-6 shadow-lg hover-scale" data-aos="fade-left" data-aos-delay="100">
                        <h2 class="text-xl font-semibold mb-4">Quick Actions</h2>
                        <div class="space-y-3">
                            <button onclick="launchMinecraft()" class="minecraft-btn w-full py-3 px-4 rounded-lg flex items-center space-x-2 transition">
                                <i data-feather="play"></i>
                                <span>Launch Minecraft</span>
                            </button>
                            
                            <button onclick="openModal()" class="bg-blue-600 hover:bg-blue-700 w-full py-3 px-4 rounded-lg flex items-center space-x-2 transition">
                                <i data-feather="download-cloud"></i>
                                <span>Check for Updates</span>
                            </button>
                        </div>
                    </div>

                    <!-- Warning Card -->
                    <div class="glassmorphism rounded-xl p-6 shadow-lg hover-scale bg-opacity-70 bg-red-900" data-aos="fade-left" data-aos-delay="150">
                        <div class="flex items-start space-x-3">
                            <i data-feather="alert-triangle" class="text-yellow-300"></i>
                            <div>
                                <h3 class="font-semibold">Important Notice</h3>
                                <p class="text-sm text-gray-200 mt-1">
                                    Using clients may violate some servers' rules and could result in bans. 
                                    Use at your own risk, we are not liable for any bans or punishments you may receive for using these clients.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Support Card -->
                    <div class="glassmorphism rounded-xl p-6 shadow-lg hover-scale" data-aos="fade-left" data-aos-delay="200">
                        <h2 class="text-xl font-semibold mb-4">Need Help?</h2>
                        <p class="text-gray-200 mb-4">Join our Discord community for support and updates.</p>
                        <button onclick="joinDiscord()" class="bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg flex items-center space-x-2 transition">
                            <i data-feather="message-circle"></i>
                            <span>Join Discord</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="glassmorphism p-4 mt-6">
            <div class="container mx-auto text-center text-sm text-gray-300">
                <p>© 2025 Sigmi Team. All rights reserved. | <a href="#" class="hover:text-white">Terms</a> • <a href="#" class="hover:text-white">Privacy</a></p>
            </div>
        </footer>
    </div>

    <script>
        // Initialize animations and icons
        AOS.init();
        feather.replace();

        // Vanta.js background
        VANTA.GLOBE({
            el: "#vanta-bg",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            color: 0x6e45e2,
            backgroundColor: 0x0,
            size: 0.8
        });

        // Official website URLs
        const CLIENT_URLS = {
            oblivion: "https://oblivionexecutor.site/#products",
            meteor: "https://meteorclient.com/",
            wurst: "https://www.wurstclient.net/download/"
        };

        // Modal functions
        function openModal() {
            document.getElementById('updateModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('updateModal').classList.remove('active');
        }

        // Redirect to official website for downloads
        function redirectToOfficial(client) {
            window.open(CLIENT_URLS[client], '_blank');
        }

        // Redirect to update check (official website)
        function redirectToUpdate(client) {
            closeModal();
            window.open(CLIENT_URLS[client], '_blank');
        }

        // Launch Minecraft function
        function launchMinecraft() {
            alert("This would launch Minecraft. In a real implementation, this would start the game.");
        }

        // Join Discord function
        function joinDiscord() {
            window.open("https://discord.gg/Epn4J6aBnT", "_blank");
        }

        // Settings button functionality
        document.getElementById('settingsButton').addEventListener('click', function() {
            window.location.href = 'settings.html';
        });

        // Close modal when clicking outside
        document.getElementById('updateModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Cookie Functions
        function getCookie(name) {
            const cookieName = name + "=";
            const decodedCookie = decodeURIComponent(document.cookie);
            const cookieArray = decodedCookie.split(';');
            
            for(let i = 0; i < cookieArray.length; i++) {
                let cookie = cookieArray[i];
                while (cookie.charAt(0) === ' ') {
                    cookie = cookie.substring(1);
                }
                if (cookie.indexOf(cookieName) === 0) {
                    return cookie.substring(cookieName.length, cookie.length);
                }
            }
            return "";
        }

        // Members sidebar functionality
        document.getElementById('membersButton').addEventListener('click', function() {
            document.getElementById('membersSidebar').classList.add('active');
            document.getElementById('membersOverlay').classList.add('active');
            loadMembers();
        });

        document.getElementById('closeMembersSidebar').addEventListener('click', function() {
            document.getElementById('membersSidebar').classList.remove('active');
            document.getElementById('membersOverlay').classList.remove('active');
        });

        document.getElementById('membersOverlay').addEventListener('click', function() {
            document.getElementById('membersSidebar').classList.remove('active');
            this.classList.remove('active');
        });

        // Load members function
        async function loadMembers() {
            try {
                const token = getCookie('AuthToken');
                if (!token) {
                    throw new Error("No authentication token found");
                }

                const res = await fetch("https://proxyforsigmi.onrender.com/api/users", {
                    method: "GET",
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    credentials: "include"
                });

                if (!res.ok) {
                    throw new Error(`Failed to fetch members: ${res.status} ${res.statusText}`);
                }

                const contentType = res.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    throw new Error("Server returned non-JSON response");
                }

                const members = await res.json();
                const container = document.getElementById("membersList");
                
                // Clear old content with a fade effect
                container.innerHTML = "";
                container.classList.remove("opacity-100");
                container.classList.add("opacity-0");
                
                setTimeout(() => {
                    if (members.length === 0) {
                        container.innerHTML = `
                            <div class="text-center py-8 text-gray-400">
                                <i data-feather="users" class="w-12 h-12 mx-auto mb-4"></i>
                                <p>No members found</p>
                            </div>
                        `;
                    } else {
                        members.forEach(user => {
                            // initials for avatar
                            const initials = user.username
                                .split(" ")
                                .map(word => word[0].toUpperCase())
                                .join("")
                                .slice(0, 2);

                            // Color based on role for consistency
                            let color = "bg-purple-600";
                            if (user.role === "Owner") color = "bg-red-600";
                            if (user.role === "Admin") color = "bg-blue-600";

                            const memberDiv = document.createElement("div");
                            memberDiv.className = "flex items-center p-3 rounded-lg hover:bg-purple-800 hover:bg-opacity-50 transition-colors duration-200";
                            memberDiv.title = `Role: ${user.role} | Joined: ${user.joined || 'Unknown'}`;

                            memberDiv.innerHTML = `
                                <div class="w-10 h-10 rounded-full ${color} flex items-center justify-center mr-3 flex-shrink-0">
                                    <span class="text-sm font-bold text-white">${initials}</span>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="font-medium truncate">${user.username}</div>
                                    <div class="text-xs text-gray-400 capitalize">${user.role || 'Member'}</div>
                                </div>
                            `;
                            container.appendChild(memberDiv);
                        });
                    }
                    
                    // Fade in the new content
                    setTimeout(() => {
                        container.classList.remove("opacity-0");
                        container.classList.add("opacity-100");
                        feather.replace(); // Refresh icons
                    }, 50);
                    
                }, 100);
                
            } catch (err) {
                console.error("[ERROR] Failed to load members:", err);
                
                const container = document.getElementById("membersList");
                container.innerHTML = `
                    <div class="text-center py-8 text-red-300">
                        <i data-feather="alert-triangle" class="w-12 h-12 mx-auto mb-4"></i>
                        <p class="font-medium">Failed to load members</p>
                        <p class="text-sm mt-2">${err.message}</p>
                        <button onclick="loadMembers()" class="mt-4 px-4 py-2 bg-purple-700 rounded-lg hover:bg-purple-600 transition-colors">
                            Try Again
                        </button>
                    </div>
                `;
                feather.replace();
            }
        }

        // Refresh icons after page load
        document.addEventListener('DOMContentLoaded', function() {
            feather.replace();
        });
    </script>
</body>
</html>